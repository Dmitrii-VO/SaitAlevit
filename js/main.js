/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(){var n,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function s(t,a,i,o){var s=a&&a.prototype instanceof l?a:l,u=Object.create(s.prototype);return e(u,"_invoke",function(t,e,a){var i,o,s,l=0,u=a||[],d=!1,h={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(t,e){return i=t,o=0,s=n,h.n=e,c}};function f(t,e){for(o=t,s=e,r=0;!d&&l&&!a&&r<u.length;r++){var a,i=u[r],f=h.p,m=i[2];t>3?(a=m===e)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=n):i[0]<=f&&((a=t<2&&f<i[1])?(o=0,h.v=e,h.n=i[1]):f<m&&(a=t<3||i[0]>e||e>m)&&(i[4]=t,i[5]=e,h.n=m,o=0))}if(a||t>1)return c;throw d=!0,e}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),o=u,s=m;(r=o<2?n:s)||!d;){i||(o?o<3?(o>1&&(h.n=-1),f(o,s)):h.n=s:h.v=s);try{if(l=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=n}else if((r=(d=h.n<0)?s:t.call(e,h))!==c)break}catch(t){i=n,o=1,s=t}finally{l=1}}return{value:r,done:d}}}(t,i,o),!0),u}var c={};function l(){}function u(){}function d(){}r=Object.getPrototypeOf;var h=[][i]?r(r([][i]())):(e(r={},i,function(){return this}),r),f=d.prototype=l.prototype=Object.create(h);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,e(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=d,e(f,"constructor",d),e(d,"constructor",u),u.displayName="GeneratorFunction",e(d,o,"GeneratorFunction"),e(f),e(f,o,"Generator"),e(f,i,function(){return this}),e(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m}})()}function e(t,n,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}e=function(t,n,r,a){function o(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?i?i(t,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[n]=r:(o("next",0),o("throw",1),o("return",2))},e(t,n,r,a)}function n(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function r(t){return a.apply(this,arguments)}function a(){var e;return e=t().m(function e(n){var r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch(n);case 1:if((r=t.v).ok){t.n=3;break}return t.n=2,fetch("/"+n);case 2:r=t.v;case 3:if(r.ok){t.n=4;break}throw new Error("HTTP error! status: ".concat(r.status));case 4:return t.n=5,r.json();case 5:return t.a(2,t.v);case 6:return t.p=6,a=t.v,console.error("Ошибка загрузки ".concat(n,":"),a),t.a(2,null)}},e,null,[[0,6]])}),a=function(){var t=this,r=arguments;return new Promise(function(a,i){var o=e.apply(t,r);function s(t){n(o,a,i,s,c,"next",t)}function c(t){n(o,a,i,s,c,"throw",t)}s(void 0)})},a.apply(this,arguments)}function i(t,e){if(!t)return"";var n=t.toLowerCase(),r="";return r=n.includes("построен")||n.includes("сдан")?"Построен":n.includes("строит")?"Строится":t,e&&(n.includes("построен")||n.includes("сдан"))&&(r+=" • ".concat(e)),r}function o(t){if(!t)return"";var e=document.createElement("div");return e.textContent=t,e.innerHTML}var s={phone:'<path d="M22 16.92V19.92C22 20.52 21.52 21 20.92 21C9.4 21 0 11.6 0 0.08C0 -0.52 0.48 -1 1.08 -1H4.08C4.68 -1 5.16 -0.52 5.16 0.08C5.16 1.08 5.36 2.04 5.72 2.92C5.88 3.32 5.84 3.8 5.6 4.16L3.88 6.88C4.6 9.24 6.76 11.4 9.12 12.12L11.84 10.4C12.2 10.16 12.68 10.12 13.08 10.28C13.96 10.64 14.92 10.84 15.92 10.84C16.52 10.84 17 11.32 17 11.92V14.92C17 15.52 16.52 16 15.92 16H22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>',email:'<path d="M4 4H20C21 4 22 5 22 6V18C22 19 21 20 20 20H4C3 20 2 19 2 18V6C2 5 3 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>',address:'<path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'};function c(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=document.createElement("div");i.className="contacts__item";var c=o(e),l=o(n),u=r?o(r):"#";return i.innerHTML='\n        <div class="contacts__item-icon">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                '.concat(s[t]||"",'\n            </svg>\n        </div>\n        <div class="contacts__item-content">\n            <h3 class="contacts__item-title">').concat(c,"</h3>\n            ").concat(a?'<p class="contacts__item-text">'.concat(l,"</p>"):'<a href="'.concat(u,'" class="contacts__item-link">').concat(l,"</a>"),"\n        </div>\n    "),i}function l(t,e){if(!(t&&"#"!==t||e&&"#"!==e))return null;var n=document.createElement("div");n.className="contacts__social";var r="";return t&&"#"!==t&&(r+=function(t){var e=t.replace(/[^\d+]/g,"");e.startsWith("+7")?e=e.substring(1):e.startsWith("8")?e="7"+e.substring(1):e.startsWith("+")&&(e=e.substring(1));var n=o(t.startsWith("http://")||t.startsWith("https://")?t:"https://wa.me/".concat(e));return'\n        <a href="'.concat(n,'" class="contacts__social-link contacts__social-link--whatsapp" aria-label="WhatsApp" target="_blank" rel="noopener noreferrer">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M17.472 14.382C17.231 14.283 15.243 13.432 14.875 13.305C14.507 13.178 14.273 13.115 14.04 13.385C13.806 13.655 13.011 14.477 12.81 14.699C12.608 14.921 12.406 14.958 12.165 14.859C11.925 14.76 10.876 14.449 9.593 13.305C8.556 12.38 7.83 11.237 7.628 10.967C7.427 10.697 7.593 10.562 7.765 10.395C7.914 10.25 8.084 10.03 8.215 9.85C8.346 9.67 8.409 9.53 8.508 9.33C8.607 9.13 8.545 8.95 8.446 8.8C8.347 8.65 7.496 6.662 7.195 5.87C6.899 5.09 6.6 5.19 6.435 5.18C6.27 5.17 6.08 5.17 5.89 5.17C5.7 5.17 5.445 5.23 5.225 5.48C5.005 5.73 4.405 6.33 4.405 7.63C4.405 8.93 5.305 10.17 5.425 10.35C5.545 10.53 7.183 13.305 9.703 14.5C10.483 14.9 11.063 15.12 11.483 15.27C12.023 15.47 12.503 15.45 12.883 15.38C13.303 15.3 14.333 14.7 14.583 14.05C14.833 13.4 14.833 12.82 14.733 12.68C14.633 12.54 14.473 12.48 14.232 12.38H17.472Z" fill="currentColor"/>\n                <path d="M12 0C5.373 0 0 5.373 0 12C0 13.894 0.48 15.67 1.32 17.21L0 24L6.79 22.68C8.33 23.52 10.106 24 12 24C18.627 24 24 18.627 24 12C24 5.373 18.627 0 12 0ZM12 21.6C10.39 21.6 8.88 21.12 7.6 20.28L7.2 20.04L3.12 21.12L4.2 17.16L3.96 16.76C3.12 15.48 2.64 13.97 2.64 12.36C2.64 6.756 6.756 2.64 12.36 2.64C17.964 2.64 22.08 6.756 22.08 12.36C22.08 17.964 17.964 22.08 12.36 22.08H12Z" fill="currentColor"/>\n            </svg>\n            <span>WhatsApp</span>\n        </a>\n    ')}(t)),e&&"#"!==e&&(r+=function(t){var e="#";if(!t||"#"===t)return"";var n=t.trim();if(n.startsWith("http://")||n.startsWith("https://"))e=n;else if(n.startsWith("@")||/^[a-zA-Z0-9_]+$/.test(n)){var r=n.replace("@","").replace("https://t.me/","").replace("http://t.me/","");e="https://t.me/".concat(r)}else if(/^\+?[\d\s\-()]+$/.test(n)){var a=n.replace(/\D/g,"");e=a.startsWith("8")?"https://t.me/+7".concat(a.substring(1)):a.startsWith("7")?"https://t.me/+".concat(a):"https://t.me/+7".concat(a)}var i=o(e);return'\n        <a href="'.concat(i,'" class="contacts__social-link contacts__social-link--telegram" aria-label="Telegram" target="_blank" rel="noopener noreferrer">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M12 0C5.373 0 0 5.373 0 12C0 18.627 5.373 24 12 24C18.627 24 24 18.627 24 12C24 5.373 18.627 0 12 0ZM17.894 8.221L15.68 17.896C15.68 17.896 15.474 18.5 14.842 18.5C14.21 18.5 13.789 18.105 13.789 18.105L10.842 15.526L9.263 14.105L6.316 11.158C6.316 11.158 5.737 10.579 6.316 10C6.895 9.421 7.474 9.421 7.474 9.421L14.842 13.263L17.789 10.316C17.789 10.316 18.368 9.737 17.789 9.158C17.21 8.579 16.421 8.579 16.421 8.579L8.421 11.526L6.316 10.737C6.316 10.737 5.737 10.368 6.316 9.789C6.895 9.21 7.684 9.21 7.684 9.21L17.684 7.684C17.684 7.684 18.5 7.263 17.894 8.221Z" fill="currentColor"/>\n            </svg>\n            <span>Telegram</span>\n        </a>\n    ')}(e)),r&&(n.innerHTML='\n            <h3 class="contacts__social-title">Мессенджеры</h3>\n            <div class="contacts__social-links">\n                '.concat(r,"\n            </div>\n        ")),n}function u(t){var e=document.createElement("article");e.className="reviews__card";var n=t.videoUrl?'<iframe src="'.concat(o(t.videoUrl),'" class="reviews__card-video-iframe" frameborder="0" allowfullscreen></iframe>'):'<div class="reviews__card-video-placeholder">\n            <svg class="reviews__card-video-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>\n                <path d="M10 8L16 12L10 16V8Z" fill="currentColor"/>\n            </svg>\n            <span class="reviews__card-video-text">Видео отзыв</span>\n        </div>';return e.innerHTML='\n        <div class="reviews__card-video">\n            '.concat(n,'\n        </div>\n        <div class="reviews__card-content">\n            <p class="reviews__card-author">').concat(o(t.clientName||"Клиент"),"</p>\n            ").concat(t.houseName?'<p class="reviews__card-house">'.concat(o(t.houseName),"</p>"):"",'\n            <p class="reviews__card-text">"').concat(o(t.reviewText||""),'"</p>\n        </div>\n    '),e}function d(t){var e=document.createElement("article");return e.className="reviews__text-item",e.innerHTML='\n        <div class="reviews__text-quote">\n            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M3 21C3 17.4 5.4 15 9 15C10.6 15 12 15.6 13 16.6M21 21C21 17.4 18.6 15 15 15C13.4 15 12 15.6 11 16.6M13 8C13 9.65685 11.6569 11 10 11C8.34315 11 7 9.65685 7 8C7 6.34315 8.34315 5 10 5C11.6569 5 13 6.34315 13 8ZM17 8C17 9.65685 15.6569 11 14 11C12.3431 11 11 9.65685 11 8C11 6.34315 12.3431 5 14 5C15.6569 5 17 6.34315 17 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n        </div>\n        <p class="reviews__text-content">"'.concat(o(t.reviewText||""),'"</p>\n        <div class="reviews__text-meta">\n            <p class="reviews__text-author">').concat(o(t.clientName||"Клиент"),"</p>\n            ").concat(t.houseName?'<p class="reviews__text-house">'.concat(o(t.houseName),"</p>"):"","\n        </div>\n    "),e}function h(t,e){var n=document.createElement("div");n.className="works__card";var r=t.mainImage||"",a=t.gallery||[r].filter(Boolean),i=JSON.stringify(a),s=e?e(t.workStatus,t.completionDate):"",c=[];t.rooms&&c.push("".concat(t.rooms," комн.")),t.material&&c.push(t.material);var l=c.length>0?c.join(" • "):"";return n.innerHTML='\n        <div class="works__card-image">\n            <img src="'.concat(o(r),'" alt="').concat(o(t.title||"Работа")," - построенный дом компании АЛЕВИТ СТРОЙ\" class=\"works__card-img\" loading=\"lazy\" onerror=\"this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'300\\'%3E%3Crect fill=\\'%23f5f5f5\\' width=\\'400\\' height=\\'300\\'/%3E%3Ctext fill=\\'%23999\\' x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\'%3EНет фото%3C/text%3E%3C/svg%3E';\">\n            ").concat(s?'<div class="works__card-badge works__card-badge--completed">'.concat(o(s),"</div>"):"",'\n        </div>\n        <div class="works__card-content">\n            <h3 class="works__card-title">').concat(o(t.title||"Работа"),'</h3>\n            <ul class="works__card-specs">\n                ').concat(t.area?'\n                    <li class="works__card-spec">\n                        <span class="works__card-spec-label">Площадь:</span>\n                        <span class="works__card-spec-value"><strong>'.concat(t.area,"</strong> м²</span>\n                    </li>\n                "):"","\n                ").concat(l?'\n                    <li class="works__card-spec">\n                        <span class="works__card-spec-label">Характеристики:</span>\n                        <span class="works__card-spec-value">'.concat(o(l),"</span>\n                    </li>\n                "):"","\n            </ul>\n            ").concat(a.length>0?'<button class="btn btn--gold works__gallery-btn" data-project="'.concat(o(t.title||"Работа"),"\" data-images='").concat(i,"'>Смотреть все фото</button>"):"","\n        </div>\n    "),n}function f(t){var e=document.querySelector(".floating-button--phone");if(e&&t.phone){var n="tel:".concat(t.phone.replace(/\D/g,""));e.setAttribute("href",n)}var r=document.querySelector(".floating-button--whatsapp");if(r&&t.whatsapp&&"#"!==t.whatsapp){var a=t.whatsapp;if(a.startsWith("+")||/^\d/.test(a)){var i=a.replace(/[^\d+]/g,"").replace(/^\+/,"");a="https://wa.me/".concat(i)}r.setAttribute("href",a)}}function m(){var t=document.getElementById("contacts-info");if(t){var e=t.querySelector(".contacts__item");if(e){var n=e.querySelector(".contacts__item-link");if(n){var r=n.textContent.trim();if(r){var a=document.getElementById("process-consultation-phone");a&&(a.textContent=r)}}}}}function v(t){t&&document.querySelectorAll('script[type="application/ld+json"]').forEach(function(e){try{var n=JSON.parse(e.textContent),r=!1;if(t.phone&&(n.telephone&&(n.telephone=t.phone,r=!0),n.contactPoint&&n.contactPoint.telephone&&(n.contactPoint.telephone=t.phone,r=!0)),t.email&&n.email&&(n.email=t.email,r=!0),t.address&&n.address){var a=function(t){if(!t)return null;var e={streetAddress:"",addressLocality:"",addressRegion:""},n=t.match(/(ул\.\s*[^,]+,\s*д\.\s*\d+)/i);n&&(e.streetAddress=n[1]);var r=t.match(/(?:с\.|село|г\.|город|пос\.|посёлок)\s*([^,]+)/i);r&&(e.addressLocality=r[1].trim());var a=t.match(/([^,]+область)/i);return a&&(e.addressRegion=a[1].trim()),Object.keys(e).some(function(t){return e[t]})?e:null}(t.address);a&&(a.streetAddress&&(n.address.streetAddress=a.streetAddress),a.addressLocality&&(n.address.addressLocality=a.addressLocality),a.addressRegion&&(n.address.addressRegion=a.addressRegion),r=!0)}r&&(e.textContent=JSON.stringify(n,null,2))}catch(t){console.error("Ошибка обновления schema.org:",t)}})}function p(){document.querySelectorAll(".works__gallery-btn").forEach(function(t){t.addEventListener("click",function(){var t=this.getAttribute("data-project"),e=this.getAttribute("data-images");try{var n=JSON.parse(e||"[]");n.length>0&&"function"==typeof window.openGallery&&window.openGallery(t,n)}catch(t){console.error("Ошибка открытия галереи:",t)}})})}function g(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,s=0,c=t,h.n=n,o}};function f(n,r){for(s=n,c=r,e=0;!d&&l&&!a&&e<u.length;e++){var a,i=u[e],f=h.p,m=i[2];n>3?(a=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,h.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,c=m;(e=s<2?t:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),e=i[a]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=t}else if((e=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(e){i=t,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(y(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(u);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,y(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=l,y(d,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,a,"GeneratorFunction"),y(d),y(d,a,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(g=function(){return{w:i,m:h}})()}function y(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}y=function(t,e,n,r){function i(e,n){y(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},y(t,e,n,r)}function w(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){w(i,r,a,o,s,"next",t)}function s(t){w(i,r,a,o,s,"throw",t)}o(void 0)})}}function _(t){return t.filter(function(t){var e=(t.status||"").toLowerCase();return"published"===e||"опубликован"===e})}var C=[];function k(t){var e=document.getElementById("projects-grid");if(e){var n=C.filter(function(e){return function(t){var e=(t.floors||"").toString().toLowerCase();return e.includes("2")||e.includes("два")||e.includes("двух")?"2":"1"}(e)===t});e.classList.add("projects__grid--fade-out"),setTimeout(function(){e.innerHTML="",0===n.length?e.innerHTML='<div class="projects__empty"><p>В этой категории пока нет проектов</p></div>':(n.forEach(function(t){var n=function(t){var e=document.createElement("div");e.className="projects__card";var n=t.description||"одноэтажный дом ".concat(t.area," м²"),r=new Intl.NumberFormat("ru-RU").format(t.price),a=t.mainImage||"",i="".concat(t.title," - ").concat(n),s=JSON.stringify(t.gallery||[t.mainImage].filter(Boolean));return e.innerHTML='\n        <div class="projects__card-image">\n            <img src="'.concat(a,'" alt="').concat(o(i),"\" class=\"projects__card-img\" loading=\"lazy\" onerror=\"this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'300\\'%3E%3Crect fill=\\'%23f5f5f5\\' width=\\'400\\' height=\\'300\\'/%3E%3Ctext fill=\\'%23999\\' x=\\'50%25\\' y=\\'50%25\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\'%3EНет фото%3C/text%3E%3C/svg%3E';\">\n        </div>\n        <div class=\"projects__card-content\">\n            <h3 class=\"projects__card-title\">").concat(o(t.title),'</h3>\n            <p class="projects__card-description">').concat(o(n),'</p>\n            <ul class="projects__card-specs">\n                <li class="projects__card-spec">\n                    <span class="projects__card-spec-label">Этажность:</span>\n                    <span class="projects__card-spec-value">').concat(o(t.floors||"1 этаж"),'</span>\n                </li>\n                <li class="projects__card-spec">\n                    <span class="projects__card-spec-label">Площадь:</span>\n                    <span class="projects__card-spec-value"><strong>').concat(t.area,'</strong> м²</span>\n                </li>\n                <li class="projects__card-spec">\n                    <span class="projects__card-spec-label">Стоимость:</span>\n                    <span class="projects__card-spec-value"><strong>').concat(r,'</strong> ₽</span>\n                </li>\n            </ul>\n            <button class="btn btn--gold projects__gallery-btn" \n                    data-project-id="').concat(o(t.id),'" \n                    data-project-title="').concat(o(t.title),"\"\n                    data-images='").concat(s,"'>\n                Смотреть все фото\n            </button>\n        </div>\n    "),e}(t);n&&e.appendChild(n)}),document.querySelectorAll(".projects__gallery-btn").forEach(function(t){t.addEventListener("click",function(){var t=this.getAttribute("data-project-title"),e=this.getAttribute("data-images");try{var n=JSON.parse(e||"[]");n.length>0&&"function"==typeof window.openGallery&&window.openGallery(t,n)}catch(t){console.error("Ошибка открытия галереи:",t)}})})),e.classList.remove("projects__grid--fade-out")},200)}else console.error("Элемент #projects-grid не найден")}function S(){var t=document.querySelectorAll(".projects__tab"),e=document.getElementById("projects-grid");if(t.length&&e){t.forEach(function(n){n.addEventListener("click",function(){var n=this.getAttribute("data-category");t.forEach(function(t){t.classList.remove("projects__tab--active"),t.setAttribute("aria-selected","false")}),this.classList.add("projects__tab--active"),this.setAttribute("aria-selected","true"),e.setAttribute("aria-labelledby",this.id),k(n)})});var n=document.querySelector('.projects__tab[data-category="1"]');n&&(n.classList.add("projects__tab--active"),n.setAttribute("aria-selected","true"),e.setAttribute("aria-labelledby",n.id),k("1"))}}function E(){return(E=b(g().m(function t(){var e,n,a;return g().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r("data/projects.json");case 1:if(e=t.v){t.n=2;break}return t.a(2);case 2:if(n=e.projects||[],document.getElementById("projects-grid")){t.n=3;break}return console.error("Элемент #projects-grid не найден"),t.a(2);case 3:C=_(n),S(),t.n=5;break;case 4:t.p=4,a=t.v,console.error("Ошибка загрузки проектов:",a);case 5:return t.a(2)}},t,null,[[0,4]])}))).apply(this,arguments)}function L(){return(L=b(g().m(function t(){var e,n,a,i,o,s,u;return g().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r("data/contacts.json");case 1:if(e=t.v){t.n=2;break}return t.a(2);case 2:(n=document.getElementById("contacts-info"))?(n.innerHTML="",e.phone&&(a=c("phone","Телефон",e.phone,"tel:".concat(e.phone.replace(/\D/g,""))),n.appendChild(a)),e.email&&(i=c("email","Email",e.email,"mailto:".concat(e.email)),n.appendChild(i)),e.address&&(o=c("address","Адрес",e.address,null,!0),n.appendChild(o)),(s=l(e.whatsapp,e.telegram))&&n.appendChild(s),m()):console.error("Элемент #contacts-info не найден"),T(e),f(e),v(e),t.n=4;break;case 3:t.p=3,u=t.v,console.error("Ошибка загрузки контактов:",u);case 4:return t.a(2)}},t,null,[[0,3]])}))).apply(this,arguments)}function T(t){var e=document.getElementById("footer-phone");if(e&&t.phone){var n=t.phone.replace(/\D/g,""),r=11===n.length?"+7 (".concat(n.slice(1,4),") ").concat(n.slice(4,7),"-").concat(n.slice(7,9),"-").concat(n.slice(9,11)):t.phone;e.textContent=r,e.href="tel:".concat(n)}var a=document.getElementById("footer-email");a&&t.email&&(a.textContent=t.email,a.href="mailto:".concat(t.email));var i=document.getElementById("footer-address");i&&t.address&&(i.textContent=t.address);var o=document.getElementById("privacy-modal-phone");if(o&&t.phone){var s=t.phone.replace(/\D/g,""),c=11===s.length?"+7 (".concat(s.slice(1,4),") ").concat(s.slice(4,7),"-").concat(s.slice(7,9),"-").concat(s.slice(9,11)):t.phone;o.textContent=c,o.href="tel:".concat(s)}var l=document.getElementById("privacy-modal-email");l&&t.email&&(l.textContent=t.email,l.href="mailto:".concat(t.email));var u=document.getElementById("privacy-modal-email-2");u&&t.email&&(u.textContent=t.email,u.href="mailto:".concat(t.email));var d=document.getElementById("privacy-modal-address");d&&t.address&&(d.textContent=t.address);var h=null;t.whatsapp&&((h=t.whatsapp.replace(/[^\d+]/g,"")).startsWith("+7")?h=h.substring(1):h.startsWith("8")?h="7"+h.substring(1):h.startsWith("+")&&(h=h.substring(1)));var f=document.getElementById("footer-whatsapp");f&&h&&(f.href="https://wa.me/".concat(h));var m=null;if(t.telegram&&"#"!==t.telegram)if((m=t.telegram.trim()).startsWith("http://")||m.startsWith("https://"));else if(m.startsWith("@")||/^[a-zA-Z0-9_]+$/.test(m)){var v=m.replace("@","").replace("https://t.me/","").replace("http://t.me/","");m="https://t.me/".concat(v)}else if(/^\+?[\d\s\-()]+$/.test(m)){var p=m.replace(/\D/g,"");m=p.startsWith("8")?"https://t.me/+7".concat(p.substring(1)):p.startsWith("7")?"https://t.me/+".concat(p):"https://t.me/+7".concat(p)}else m=null;var g=document.getElementById("footer-telegram");g&&(m?(g.href=m,g.style.display=""):g.style.display="none")}function x(){return(x=b(g().m(function t(){var e,n,a,i,o,s,c,l;return g().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r("data/reviews.json");case 1:if(e=t.v){t.n=2;break}return t.a(2);case 2:if(n=e.reviews||[],a=document.getElementById("reviews-grid"),i=document.getElementById("reviews-text"),a&&i){t.n=3;break}return console.error("Элементы #reviews-grid или #reviews-text не найдены"),t.a(2);case 3:if(a.innerHTML="",i.innerHTML="",o=_(n),s=o.filter(function(t){return t.isVideo||t.videoUrl}),c=o.filter(function(t){return!t.isVideo&&!t.videoUrl}),0!==s.length||0!==c.length){t.n=4;break}return a.innerHTML='<div class="reviews__empty"><p>Отзывы появятся здесь скоро</p></div>',t.a(2);case 4:s.forEach(function(t){var e=u(t);e&&a.appendChild(e)}),c.forEach(function(t){var e=d(t);e&&i.appendChild(e)}),t.n=6;break;case 5:t.p=5,l=t.v,console.error("Ошибка загрузки отзывов:",l);case 6:return t.a(2)}},t,null,[[0,5]])}))).apply(this,arguments)}function j(){return(j=b(g().m(function t(){var e,n,a,o,s;return g().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r("data/works.json");case 1:if(e=t.v){t.n=2;break}return t.a(2);case 2:if(n=e.works||[],a=document.getElementById("works-grid")){t.n=3;break}return console.error("Элемент #works-grid не найден"),t.a(2);case 3:if(a.innerHTML="",0!==(o=_(n)).length){t.n=4;break}return a.innerHTML='<div class="works__empty"><p>Работы появятся здесь скоро</p></div>',t.a(2);case 4:o.forEach(function(t){var e=h(t,i);e&&a.appendChild(e)}),o.length>0&&p(),t.n=6;break;case 5:t.p=5,s=t.v,console.error("Ошибка загрузки работ:",s);case 6:return t.a(2)}},t,null,[[0,5]])}))).apply(this,arguments)}function A(){return(A=b(g().m(function t(){var e,n,a,i,o,s,c,l,u,d;return g().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r("data/prices.json");case 1:if((e=t.v)&&e.prices){t.n=2;break}return t.a(2);case 2:n=e.prices,a=n.shell,i=n.clean,o=n.turnkey,s=function(t){return!t||isNaN(t)?null:"".concat(new Intl.NumberFormat("ru-RU").format(t)," ₽/м²")},c=document.querySelector('[data-price-key="shell"]'),l=document.querySelector('[data-price-key="clean"]'),u=document.querySelector('[data-price-key="turnkey"]'),c&&s(a)&&(c.textContent=s(a)),l&&s(i)&&(l.textContent=s(i)),u&&s(o)&&(u.textContent=s(o)),t.n=4;break;case 3:t.p=3,d=t.v,console.error("Ошибка загрузки цен калькулятора:",d);case 4:return t.a(2)}},t,null,[[0,3]])}))).apply(this,arguments)}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification notification--".concat(e),n.textContent=t,Object.assign(n.style,{position:"fixed",top:"20px",right:"20px",padding:"1rem",borderRadius:"0.375rem",color:"white",zIndex:"9999",transition:"all 0.3s ease",opacity:"0",transform:"translateX(100%)"});var r={success:"#28a745",error:"#dc3545",warning:"#ffc107",info:"#17a2b8"};n.style.backgroundColor=r[e]||r.info,document.body.appendChild(n),requestAnimationFrame(function(){n.style.opacity="1",n.style.transform="translateX(0)"}),setTimeout(function(){n.style.opacity="0",n.style.transform="translateX(100%)",setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}function q(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return O(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,s=0,c=t,h.n=n,o}};function f(n,r){for(s=n,c=r,e=0;!d&&l&&!a&&e<u.length;e++){var a,i=u[e],f=h.p,m=i[2];n>3?(a=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,h.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,c=m;(e=s<2?t:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),e=i[a]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=t}else if((e=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(e){i=t,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(O(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(u);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,O(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=l,O(d,"constructor",l),O(l,"constructor",c),c.displayName="GeneratorFunction",O(l,a,"GeneratorFunction"),O(d),O(d,a,"Generator"),O(d,r,function(){return this}),O(d,"toString",function(){return"[object Generator]"}),(q=function(){return{w:i,m:h}})()}function O(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}O=function(t,e,n,r){function i(e,n){O(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},O(t,e,n,r)}function I(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function Y(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){I(i,r,a,o,s,"next",t)}function s(t){I(i,r,a,o,s,"throw",t)}o(void 0)})}}function H(t){var e="checkbox"===t.type&&t.closest(".cta__form-checkbox")||t;e.classList.add("shake"),setTimeout(function(){e.classList.remove("shake")},500)}function X(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.value.trim(),r=document.getElementById("cta-name-error"),a=n.length>=2&&/^[А-Яа-яЁёA-Za-z\s\-]+$/.test(n);return r&&(r.textContent=""),n.length>0?a?(t.classList.remove("invalid"),t.classList.add("valid"),t.setAttribute("aria-invalid","false")):(t.classList.remove("valid"),t.classList.add("invalid"),t.setAttribute("aria-invalid","true"),e&&r&&(H(t),n.length<2?r.textContent="Имя должно содержать минимум 2 символа":r.textContent="Имя может содержать только буквы, пробелы и дефисы")):(t.classList.remove("valid","invalid"),e&&r?(t.setAttribute("aria-invalid","true"),H(t),r.textContent="Пожалуйста, укажите ваше имя"):t.setAttribute("aria-invalid","false")),a}function F(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.value.replace(/\D/g,""),r=document.getElementById("cta-phone-error"),a=function(t){var e=t.replace(/\D/g,""),n=e;if(e.length>0&&(e.startsWith("8")||e.startsWith("7")?n="+7"+e.slice(1):e.startsWith("+7")||(n="+7"+e),n.length>2)){var r=n.match(/^\+7(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);r&&(n="+7",r[1]&&(n+=" ("+r[1]),r[2]&&(n+=") "+r[2]),r[3]&&(n+="-"+r[3]),r[4]&&(n+="-"+r[4]))}return n}(n);t.value=a;var i=a.replace(/\D/g,""),o=11===i.length&&i.startsWith("7")&&/^[489]/.test(i[1]);return r&&(r.textContent=""),a.length>0?o?(t.classList.remove("invalid"),t.classList.add("valid"),t.setAttribute("aria-invalid","false")):(t.classList.remove("valid"),t.classList.add("invalid"),t.setAttribute("aria-invalid","true"),e&&r&&(i.length>=5?(H(t),r.textContent="Укажите полный номер телефона (11 цифр, например: +7 (900) 123-45-67)"):i.length)):(t.classList.remove("valid","invalid"),e&&r?(t.setAttribute("aria-invalid","true"),H(t),r.textContent="Пожалуйста, укажите ваш телефон"):t.setAttribute("aria-invalid","false")),o}function N(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseFloat(t.value),r=document.getElementById("cta-area-error"),a=!isNaN(n)&&n>=20&&n<=500;return r&&(r.textContent=""),t.value.trim().length>0?a?(t.classList.remove("invalid"),t.classList.add("valid"),t.setAttribute("aria-invalid","false")):(t.classList.remove("valid"),t.classList.add("invalid"),t.setAttribute("aria-invalid","true"),e&&r&&(H(t),isNaN(n)?r.textContent="Укажите площадь числом":n<20?r.textContent="Минимальная площадь дома — 20 м²":n>500&&(r.textContent="Максимальная площадь дома — 500 м²"))):(t.classList.remove("valid","invalid"),t.setAttribute("aria-invalid","false")),a}function P(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.getElementById("cta-agreement-error"),i=t.checked;return a&&(a.textContent=""),i?(t.setAttribute("aria-invalid","false"),null===(e=t.closest(".cta__form-checkbox"))||void 0===e||e.classList.remove("invalid")):(t.setAttribute("aria-invalid","true"),null===(n=t.closest(".cta__form-checkbox"))||void 0===n||n.classList.add("invalid"),r&&a&&(H(t),a.textContent="Необходимо дать согласие на обработку персональных данных")),i}function B(){return(B=Y(q().m(function t(e,n,r,a,i){var o,s,c,l,u,d,h,f,m,v,p,g,y;return q().w(function(t){for(;;)switch(t.p=t.n){case 0:if(o=e.querySelector("#cta-name"),s=e.querySelector("#cta-phone"),c=e.querySelector("#cta-area"),l=e.querySelector("#cta-agreement"),u=X(o,!0),d=F(s,!0),h=!c||N(c,!0),f=P(l,!0),u&&d&&h&&f){t.n=1;break}return t.a(2);case 1:return n.disabled=!0,r.style.display="none",a.style.display="inline-block",m=new FormData(e),(v=Object.fromEntries(m)).formType="CTA",t.p=2,t.n=3,fetch("/api/submit-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});case 3:return p=t.v,t.n=4,p.json();case 4:(g=t.v).success?(M("Спасибо! Мы свяжемся с вами в течение 15 минут","success"),e.reset(),e.querySelectorAll(".valid, .invalid").forEach(function(t){t.classList.remove("valid","invalid")}),e.querySelectorAll("[aria-invalid]").forEach(function(t){t.setAttribute("aria-invalid","false")}),e.querySelectorAll(".cta__form-checkbox.invalid").forEach(function(t){t.classList.remove("invalid")}),e.querySelectorAll(".cta__form-error").forEach(function(t){t.textContent=""}),i()):M(g.error||"Произошла ошибка. Пожалуйста, попробуйте ещё раз или позвоните нам.","error"),t.n=6;break;case 5:t.p=5,y=t.v,console.error("Ошибка отправки формы:",y),M("Произошла ошибка при отправке. Пожалуйста, попробуйте ещё раз или позвоните нам.","error");case 6:return t.p=6,n.disabled=!1,r.style.display="inline-block",a.style.display="none",t.f(6);case 7:return t.a(2)}},t,null,[[2,5,6,7]])}))).apply(this,arguments)}var W={"gas-block":{1:{box:25e3,clean:35e3,turnkey:45e3},2:{box:35e3,clean:48e3,turnkey:62e3}},brick:{1:{box:3e4,clean:4e4,turnkey:5e4},2:{box:4e4,clean:55e3,turnkey:7e4}}};function G(t){return z.apply(this,arguments)}function z(){return(z=Y(q().m(function t(e){var n,r,a,i;return q().w(function(t){for(;;)switch(t.n){case 0:n=new FormData(e),r=Object.fromEntries(n);try{a={formType:"calculator",area:r.area,type:r.type,floors:r.floors,finish:r.finish,name:"Не указано",phone:"Не указан"},fetch("/api/submit-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(function(t){console.error("Ошибка отправки заявки из калькулятора:",t)})}catch(t){console.error("Ошибка подготовки данных калькулятора:",t)}(i=document.querySelector("#cta"))&&(i.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(function(){var t=document.querySelector("#cta-area");t&&(t.value=r.area)},500));case 1:return t.a(2)}},t)}))).apply(this,arguments)}var D=[],R=0,Z=null,J=null,U=null,V=null;function $(t,e){if(e&&0!==e.length){D=e,R=0;var n=document.getElementById("gallery-project-name");n&&(n.textContent=t||"Проект"),Z.classList.add("gallery-modal--active"),Z.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",Q(),tt()}else console.warn("Нет изображений для отображения")}function K(){Z.classList.remove("gallery-modal--active"),Z.setAttribute("aria-hidden","true"),document.body.style.overflow="",D=[],R=0}function Q(){var t=document.getElementById("gallery-main-image"),e=document.getElementById("gallery-loader");if(t&&0!==D.length){e&&(e.style.display="flex");var n=new Image;n.src=D[R],n.onload=function(){t.src=D[R],t.alt="Фото проекта ".concat(R+1),e&&(e.style.display="none"),V&&(V.innerHTML="",D.forEach(function(t,e){var n=function(t,e){var n=document.createElement("button");n.className="gallery-modal__thumbnail",n.setAttribute("aria-label","Перейти к фото ".concat(e+1)),n.setAttribute("role","tab"),n.setAttribute("aria-selected",e===R),e===R&&n.classList.add("gallery-modal__thumbnail--active");var r=document.createElement("img");return r.src=t,r.alt="Миниатюра ".concat(e+1),r.loading="lazy",n.appendChild(r),n.addEventListener("click",function(){R=e,Q(),tt()}),n}(t,e);V.appendChild(n)})),J&&(J.disabled=0===R),U&&(U.disabled=R>=D.length-1)},n.onerror=function(){t.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600'%3E%3Crect fill='%23f5f5f5' width='800' height='600'/%3E%3Ctext fill='%23999' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3EОшибка загрузки%3C/text%3E%3C/svg%3E",e&&(e.style.display="none")}}}function tt(){var t=document.getElementById("gallery-current"),e=document.getElementById("gallery-total");t&&(t.textContent=R+1),e&&(e.textContent=D.length)}function et(t){"prev"===t&&R>0?(R--,Q(),tt()):"next"===t&&R<D.length-1&&(R++,Q(),tt())}function nt(t){"Escape"===t.key&&Z.classList.contains("gallery-modal--active")?K():Z.classList.contains("gallery-modal--active")&&("ArrowLeft"===t.key&&R>0?(R--,Q(),tt()):"ArrowRight"===t.key&&R<D.length-1&&(R++,Q(),tt()))}function rt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return at(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,s=0,c=t,h.n=n,o}};function f(n,r){for(s=n,c=r,e=0;!d&&l&&!a&&e<u.length;e++){var a,i=u[e],f=h.p,m=i[2];n>3?(a=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,h.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,c=m;(e=s<2?t:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),e=i[a]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=t}else if((e=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(e){i=t,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(at(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(u);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,at(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=l,at(d,"constructor",l),at(l,"constructor",c),c.displayName="GeneratorFunction",at(l,a,"GeneratorFunction"),at(d),at(d,a,"Generator"),at(d,r,function(){return this}),at(d,"toString",function(){return"[object Generator]"}),(rt=function(){return{w:i,m:h}})()}function at(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}at=function(t,e,n,r){function i(e,n){at(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},at(t,e,n,r)}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function ct(t){if(!t)return"red";var e=t.toLowerCase();return e.includes("сдан")||e.includes("эксплуатац")?"green":e.includes("строит")||e.includes("в процессе")?"orange":"red"}function lt(){var t;return t=rt().m(function t(){var e,n,a,i,o,s,c,l,u,d,h,f;return rt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("yandex-map")){t.n=1;break}return console.warn("Контейнер карты не найден"),t.a(2);case 1:return t.p=1,t.n=2,r("data/works.json");case 2:if(n=t.v,0!==(a=(n.works||[]).filter(function(t){return"published"===t.status&&t.coordinates&&t.coordinates.lat&&t.coordinates.lng})).length){t.n=3;break}return e.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">Объекты на карте появятся после добавления координат</p>',t.a(2);case 3:if(i=new ymaps.Map("yandex-map",{center:[50.5957,36.5872],zoom:11,controls:["zoomControl","typeSelector","fullscreenControl"]}),o=[],s=[],a.forEach(function(t){if(!t.coordinates||"number"!=typeof t.coordinates.lat||"number"!=typeof t.coordinates.lng||isNaN(t.coordinates.lat)||isNaN(t.coordinates.lng))console.warn('⚠️ Пропущена работа "'.concat(t.title,'" - невалидные координаты:'),t.coordinates);else{var e=Number(t.coordinates.lat),n=Number(t.coordinates.lng);if(e<-90||e>90||n<-180||n>180)console.warn('⚠️ Пропущена работа "'.concat(t.title,'" - координаты вне допустимого диапазона:'),{lat:e,lng:n});else{var r=ct(t.workStatus),a="green"===r?"#28a745":"orange"===r?"#ff8c00":"#dc3545";try{var i=new ymaps.Placemark([e,n],{balloonContentHeader:"<b>".concat(t.title||"Объект","</b>"),balloonContentBody:"\n                            ".concat(t.area?"<p>Площадь: ".concat(t.area," м²</p>"):"","\n                            ").concat(t.format?"<p>Формат: ".concat(t.format,"</p>"):"","\n                            ").concat(t.workStatus?"<p>Статус: ".concat(t.workStatus,"</p>"):"","\n                            ").concat(t.address?"<p>Адрес: ".concat(t.address,"</p>"):"","\n                        "),balloonContentFooter:t.description||"",hintContent:t.title||"Объект"},{iconLayout:"default#imageWithContent",iconImageHref:"data:image/svg+xml;base64,".concat(btoa('\n                            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n                                <circle cx="16" cy="16" r="14" fill="'.concat(a,'" stroke="#fff" stroke-width="2"/>\n                                <circle cx="16" cy="16" r="6" fill="#fff"/>\n                            </svg>\n                        '))),iconImageSize:[32,32],iconImageOffset:[-16,-16]});o.push(i),s.push([e,n])}catch(e){console.error('❌ Ошибка создания метки для работы "'.concat(t.title,'":'),e)}}}}),0!==o.length){t.n=4;break}return e.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">Объекты на карте появятся после добавления координат</p>',t.a(2);case 4:if(o.forEach(function(t){i.geoObjects.add(t)}),s.length>0)try{0===(c=s.filter(function(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&!isNaN(t[0])&&!isNaN(t[1])})).length?console.warn("⚠️ Нет валидных координат для установки границ карты"):1===c.length?(l=it(c[0],2),u=l[0],d=l[1],i.setCenter([u,d],15,{duration:300})):i.setBounds(c,{checkZoomRange:!0,duration:300})}catch(t){if(console.error("❌ Ошибка установки границ карты:",t),s.length>0&&Array.isArray(s[0])&&2===s[0].length)try{i.setCenter(s[0],15)}catch(t){console.error("❌ Ошибка установки центра карты:",t)}}console.log("✅ Карта инициализирована, добавлено меток: ".concat(o.length)),t.n=6;break;case 5:t.p=5,f=t.v,console.error("❌ Ошибка инициализации карты:",f),console.error("Детали ошибки:",{message:f.message,stack:f.stack,ymapsLoaded:"undefined"!=typeof ymaps}),h="Ошибка загрузки карты",f.message&&(h+=": ".concat(f.message)),e.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">'.concat(h,"</p>");case 6:return t.a(2)}},t,null,[[1,5]])}),lt=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){st(i,r,a,o,s,"next",t)}function s(t){st(i,r,a,o,s,"throw",t)}o(void 0)})},lt.apply(this,arguments)}function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ht(r.key),r)}}function ht(t){var e=function(t){if("object"!=ut(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ut(e)?e:e+""}var ft=20,mt=100,vt=80,pt=60,gt="running",yt="prepare-jump",wt="jump",bt="hanging",_t="falling",Ct="lying",kt="getting-up",St=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=null,this.currentState=gt,this.targetX=0,this.targetY=0,this.currentX=0,this.currentY=0,this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.lastMouseTime=0,this.facingLeft=!1,this.isScrolling=!1,this.scrollTimeout=null,this.animationFrame=null,this.stateTimeout=null,this.jumpCooldown=0,this.spriteFrame=0,this.spriteFrameCount=8,this.lastFrameTime=0,this.frameInterval=80,this.wanderTargetX=0,this.wanderTargetY=0,this.mouseWasMoved=!1,this.jumpTargetX=0,this.jumpTargetY=0,this.mouseMoveHandler=null,this.scrollHandler=null,this.resizeHandler=null,this.mouseMoveThrottle=null,this.init()},e=[{key:"getCharacterSize",value:function(){var t=window.innerWidth;return t<=767?pt:t<=1023?vt:mt}},{key:"init",value:function(){window.innerWidth<=767||(this.createElement(),this.setInitialPosition(),this.attachEventListeners(),this.startAnimation())}},{key:"createElement",value:function(){this.element=document.createElement("div"),this.element.className="builder-character",this.element.setAttribute("aria-hidden","true"),document.body.appendChild(this.element),this.setState(gt)}},{key:"setInitialPosition",value:function(){var t=this.getCharacterSize(),e=window.innerWidth-ft-t,n=window.innerHeight-ft-t;this.currentX=20+Math.random()*(e-20),this.currentY=20+Math.random()*(n-20);var r=this.currentX+t/2,a=this.currentY+t/2;this.mouseX=r,this.mouseY=a,this.setRandomWanderTarget(),this.targetX=this.wanderTargetX,this.targetY=this.wanderTargetY,this.updatePosition()}},{key:"setRandomWanderTarget",value:function(){var t=this.getCharacterSize(),e=window.innerWidth-ft-t,n=window.innerHeight-ft-t;this.wanderTargetX=20+Math.random()*(e-20),this.wanderTargetY=20+Math.random()*(n-20)}},{key:"attachEventListeners",value:function(){var t=this;this.mouseMoveHandler=function(e){t.mouseMoveThrottle||(t.mouseMoveThrottle=requestAnimationFrame(function(){t.handleMouseMove(e),t.mouseMoveThrottle=null}))},document.addEventListener("mousemove",this.mouseMoveHandler),this.scrollHandler=function(){t.handleScroll(),t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(function(){t.isScrolling=!1},100)},window.addEventListener("scroll",this.scrollHandler,{passive:!0}),this.resizeHandler=function(){t.handleResize()},window.addEventListener("resize",this.resizeHandler)}},{key:"handleMouseMove",value:function(t){var e=Date.now(),n=e-this.lastMouseTime;if(this.mouseWasMoved=!0,this.mouseX=t.clientX,this.mouseY=t.clientY,this.lastMouseTime>0&&n>0){var r=Math.sqrt(Math.pow(this.mouseX-this.lastMouseX,2)+Math.pow(this.mouseY-this.lastMouseY,2))/n;this.currentState===bt&&r>.75&&this.triggerFalling()}this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.lastMouseTime=e,this.updateTargetPosition()}},{key:"updateTargetPosition",value:function(){var t=this.getCharacterSize(),e=t/2,n=t/2;this.targetX=Math.max(ft,Math.min(window.innerWidth-ft-t,this.mouseX-e)),this.targetY=Math.max(ft,Math.min(window.innerHeight-ft-t,this.mouseY-n))}},{key:"handleScroll",value:function(){this.isScrolling||(this.isScrolling=!0,this.currentState!==_t&&this.currentState!==Ct&&this.currentState!==kt&&this.triggerFalling())}},{key:"handleResize",value:function(){window.innerWidth<=767?this.element&&(this.element.style.display="none"):(this.element&&(this.element.style.display="block"),this.updateTargetPosition())}},{key:"startAnimation",value:function(){var t=this,e=function(){t.update(),t.animationFrame=requestAnimationFrame(e)};e()}},{key:"update",value:function(){if(this.element){var t=Date.now();this.jumpCooldown>0&&(this.jumpCooldown-=16,this.jumpCooldown<0&&(this.jumpCooldown=0)),this.currentState===gt&&this.updateSpriteAnimation(t);var e=this.getCharacterSize(),n=this.currentX+e/2,r=this.currentY+e/2;if(this.mouseWasMoved){var a=e/2,i=e/2;this.targetX=this.mouseX-a,this.targetY=this.mouseY-i}else{var o=this.wanderTargetX+e/2,s=this.wanderTargetY+e/2;Math.sqrt(Math.pow(o-n,2)+Math.pow(s-r,2))<50&&this.setRandomWanderTarget(),this.targetX=this.wanderTargetX,this.targetY=this.wanderTargetY}var c=Math.sqrt(Math.pow(this.targetX+e/2-n,2)+Math.pow(this.targetY+e/2-r,2));if(this.currentState===gt)this.handleRunningState(c);else if(this.currentState===yt);else if(this.currentState===wt){var l=this.jumpTargetX-this.currentX,u=this.jumpTargetY-this.currentY;Math.sqrt(l*l+u*u)>2&&(this.currentX+=.15*l,this.currentY+=.15*u,this.updatePosition())}else if(this.currentState===bt)if(this.mouseWasMoved){var d=this.getCharacterSize(),h=d/2,f=d/2;this.targetX=this.mouseX-h+5,this.targetY=this.mouseY-f+25;var m=this.targetX-this.currentX,v=this.targetY-this.currentY;this.currentX+=.25*m,this.currentY+=.25*v,this.updatePosition()}else this.setState(gt);else if(this.currentState===_t){this.currentY+=3;var p=this.getCharacterSize(),g=window.innerHeight-ft-p;this.currentY>g&&(this.currentY=g),this.updatePosition()}else this.currentState===Ct||this.currentState;this.currentState===gt&&this.moveToTarget(),this.updateDirection()}}},{key:"updateSpriteAnimation",value:function(t){if(0===this.lastFrameTime)return this.lastFrameTime=t,void this.updateFrameImage();t-this.lastFrameTime>=this.frameInterval&&(this.spriteFrame=(this.spriteFrame+1)%this.spriteFrameCount,this.updateFrameImage(),this.lastFrameTime=t)}},{key:"updateFrameImage",value:function(){if(this.element){var t=this.spriteFrame+1,e="/images/builders/builder-running-".concat(t,".png");this.element.style.backgroundImage="url(".concat(e,")")}}},{key:"handleRunningState",value:function(t){this.mouseWasMoved&&(t<=18?this.triggerHanging():t<=45&&0===this.jumpCooldown&&this.triggerPrepareJump())}},{key:"triggerPrepareJump",value:function(){var t=this;this.currentState===gt&&(this.setState(yt),this.stateTimeout&&clearTimeout(this.stateTimeout),this.stateTimeout=setTimeout(function(){t.triggerJump()},450))}},{key:"triggerJump",value:function(){var t=this;this.setState(wt),this.jumpCooldown=1e3;var e=this.getCharacterSize(),n=this.currentX+e/2,r=this.currentY+e/2,a=this.targetX+e/2-n,i=this.targetY+e/2-r,o=Math.sqrt(a*a+i*i);if(o>18){var s=.65*o,c=a/o*s,l=i/o*s;this.jumpTargetX=this.currentX+c,this.jumpTargetY=this.currentY+l}else this.jumpTargetX=this.currentX,this.jumpTargetY=this.currentY;this.stateTimeout&&clearTimeout(this.stateTimeout),this.stateTimeout=setTimeout(function(){t.setState(gt)},500)}},{key:"triggerHanging",value:function(){this.setState(bt);var t=this.getCharacterSize(),e=t/2,n=t/2;this.currentX=this.mouseX-e+5,this.currentY=this.mouseY-n+25,this.updatePosition()}},{key:"triggerFalling",value:function(){var t=this;this.currentState!==_t&&this.currentState!==Ct&&this.currentState!==kt&&(this.setState(_t),this.stateTimeout&&clearTimeout(this.stateTimeout),this.stateTimeout=setTimeout(function(){t.triggerLying()},800))}},{key:"triggerLying",value:function(){var t=this;this.setState(Ct),this.stateTimeout&&clearTimeout(this.stateTimeout),this.stateTimeout=setTimeout(function(){t.triggerGettingUp()},1800)}},{key:"triggerGettingUp",value:function(){var t=this;this.setState(kt),this.stateTimeout&&clearTimeout(this.stateTimeout),this.stateTimeout=setTimeout(function(){t.setState(gt)},800)}},{key:"setState",value:function(t){this.currentState!==t&&(this.element.classList.remove("builder-character--".concat(this.currentState)),this.currentState=t,this.element.classList.add("builder-character--".concat(this.currentState)),t===gt?(this.spriteFrame=0,this.lastFrameTime=0,this.updateFrameImage()):this.element&&(this.element.style.backgroundImage=""))}},{key:"moveToTarget",value:function(){var t=this.targetX-this.currentX,e=this.targetY-this.currentY;this.currentX+=.008*t,this.currentY+=.008*e,this.updatePosition()}},{key:"updatePosition",value:function(){if(this.element){var t=this.facingLeft?-1:1;this.element.style.transform="translate(".concat(this.currentX,"px, ").concat(this.currentY,"px) scaleX(").concat(t,")")}}},{key:"updateDirection",value:function(){var t=this.getCharacterSize(),e=this.currentX+t/2,n=this.targetX+t/2;this.facingLeft=n>e}},{key:"destroy",value:function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.stateTimeout&&clearTimeout(this.stateTimeout),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.mouseMoveHandler&&document.removeEventListener("mousemove",this.mouseMoveHandler),this.scrollHandler&&window.removeEventListener("scroll",this.scrollHandler),this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}}],e&&dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();document.addEventListener("DOMContentLoaded",function(){var t,e,n,r,a;console.log("✅ DOM загружен, начинаем инициализацию"),function(){return E.apply(this,arguments)}().catch(function(t){console.error("❌ Ошибка при загрузке проектов:",t)}),function(){return L.apply(this,arguments)}().catch(function(t){console.error("❌ Ошибка при загрузке контактов:",t)}),function(){return x.apply(this,arguments)}().catch(function(t){console.error("❌ Ошибка при загрузке отзывов:",t)}),function(){return j.apply(this,arguments)}().catch(function(t){console.error("❌ Ошибка при загрузке работ:",t)}),function(){return A.apply(this,arguments)}().catch(function(t){console.error("❌ Ошибка при загрузке цен калькулятора:",t)}),document.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){var e=this.getAttribute("href");if(e&&"#"!==e&&"#!"!==e){t.preventDefault();var n=document.querySelector(e);n?n.scrollIntoView({behavior:"smooth",block:"start"}):console.warn("Элемент с ID ".concat(e," не найден"))}})}),function(){var t=document.querySelector("#floating-buttons");if(t){var e=0;window.addEventListener("scroll",function(){var n=window.pageYOffset||document.documentElement.scrollTop;n>300?(t.style.display="flex",t.style.opacity=n>e?"0.7":"1"):t.style.opacity="0",e=n})}}(),t=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&t.target.classList.add("animate-in")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),document.querySelectorAll("section").forEach(function(e){t.observe(e)}),e=document.querySelector(".nav__burger"),n=document.querySelector(".nav__menu"),r=document.querySelector(".nav__container"),e&&n&&(e.addEventListener("click",function(){var t=n.classList.contains("nav__menu--active");n.classList.toggle("nav__menu--active"),e.classList.toggle("nav__burger--active"),e.setAttribute("aria-label",t?"Открыть меню":"Закрыть меню"),e.setAttribute("aria-expanded",!t),document.body.style.overflow=t?"":"hidden"}),n.querySelectorAll(".nav__link").forEach(function(t){t.addEventListener("click",function(){n.classList.remove("nav__menu--active"),e.classList.remove("nav__burger--active"),e.setAttribute("aria-label","Открыть меню"),e.setAttribute("aria-expanded","false"),document.body.style.overflow=""})}),document.addEventListener("click",function(t){!n.classList.contains("nav__menu--active")||r.contains(t.target)||e.contains(t.target)||(n.classList.remove("nav__menu--active"),e.classList.remove("nav__burger--active"),e.setAttribute("aria-label","Открыть меню"),e.setAttribute("aria-expanded","false"),document.body.style.overflow="")})),function(){var t=document.querySelectorAll(".nav__link"),e=document.querySelectorAll("section[id]");if(t.length&&e.length){var n=!1;window.addEventListener("scroll",function(){n||(window.requestAnimationFrame(function(){r(),n=!1}),n=!0)}),r()}function r(){var n="",r=window.pageYOffset+150;if(e.forEach(function(t){var e=t.offsetTop,a=t.offsetHeight,i=t.getAttribute("id");r>=e&&r<e+a&&(n=i)}),t.forEach(function(t){t.classList.remove("nav__link--active")}),n)t.forEach(function(t){t.getAttribute("href")==="#".concat(n)&&t.classList.add("nav__link--active")});else{var a=t[0];a&&window.pageYOffset<200&&a.classList.add("nav__link--active")}}}(),(a=document.querySelectorAll(".faq__item")).forEach(function(t){var e=t.querySelector(".faq__question");e&&e.addEventListener("click",function(){var n=t.classList.contains("active");a.forEach(function(e){if(e!==t){e.classList.remove("active");var n=e.querySelector(".faq__question");n&&n.setAttribute("aria-expanded","false")}}),n?(t.classList.remove("active"),e.setAttribute("aria-expanded","false")):(t.classList.add("active"),e.setAttribute("aria-expanded","true"))})}),function(){if(Z=document.getElementById("gallery-modal")){var t=Z.querySelector(".gallery-modal__close"),e=Z.querySelector(".gallery-modal__overlay");J=Z.querySelector(".gallery-modal__arrow--prev"),U=Z.querySelector(".gallery-modal__arrow--next"),V=document.getElementById("gallery-thumbnails"),window.openGallery=$,t&&t.addEventListener("click",K),e&&e.addEventListener("click",K),J&&J.addEventListener("click",function(){return et("prev")}),U&&U.addEventListener("click",function(){return et("next")}),document.addEventListener("keydown",nt)}}(),function(){var t=document.getElementById("privacy-modal"),e=null==t?void 0:t.querySelector(".privacy-modal__overlay"),n=null==t?void 0:t.querySelector(".privacy-modal__close"),r=null==t?void 0:t.querySelector(".privacy-modal__accept"),a=document.querySelectorAll("[data-privacy-modal]");function i(){t.style.display="none",document.body.style.overflow="",t.setAttribute("aria-hidden","true")}t&&(a.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),t.style.display="flex",document.body.style.overflow="hidden",t.setAttribute("aria-hidden","false"),null==n||n.focus()})}),n&&n.addEventListener("click",i),e&&e.addEventListener("click",i),r&&r.addEventListener("click",i),document.addEventListener("keydown",function(e){"Escape"===e.key&&"flex"===t.style.display&&i()}),t.setAttribute("aria-hidden","true"))}();var i=document.querySelector(".contact__form");i&&i.addEventListener("submit",function(t){t.preventDefault();var e=new FormData(this);Object.fromEntries(e),M("Сообщение отправлено успешно!","success"),this.reset()});var o=document.querySelector("#cta-form");o&&function(t){var e=document.querySelector("#form-progress"),n=document.querySelector(".cta__form-progress"),r=t.querySelector(".cta__form-submit"),a=r.querySelector(".cta__form-submit-text"),i=r.querySelector(".cta__form-submit-loading"),o=t.querySelectorAll("input[required], select[required]"),s=function(){return function(t,e,n){var r=0;n.forEach(function(t){"checkbox"===t.type?t.checked&&r++:""!==t.value.trim()&&r++});var a=r/n.length*100;a>0?(e.classList.add("active"),t.style.width=a+"%"):e.classList.remove("active")}(e,n,o)};o.forEach(function(t){t.addEventListener("input",s),t.addEventListener("change",s),"text"===t.type&&"cta-name"===t.id?(t.addEventListener("input",function(){return X(t)}),t.addEventListener("blur",function(){return X(t,!0)})):"tel"===t.type&&"cta-phone"===t.id&&(t.addEventListener("input",function(){return F(t)}),t.addEventListener("blur",function(){return F(t,!0)}))});var c=t.querySelector("#cta-area");c&&(c.addEventListener("input",function(){N(c),s()}),c.addEventListener("blur",function(){return N(c,!0)}));var l=t.querySelector("#cta-agreement");l&&l.addEventListener("change",function(){P(l),s()}),t.addEventListener("submit",function(e){e.preventDefault(),function(t,e,n,r,a){B.apply(this,arguments)}(t,r,a,i,s)})}(o),function(){var t=document.querySelector("#calculator-form"),e=document.querySelector("#result-price");if(t&&e){t.addEventListener("input",a),t.addEventListener("change",a);var n=document.querySelector("#calc-area"),r=t.querySelectorAll('input[type="radio"]');n&&(n.addEventListener("input",a),n.addEventListener("change",a)),r.forEach(function(t){t.addEventListener("change",a)}),t.addEventListener("submit",function(){var t=Y(q().m(function t(e){return q().w(function(t){for(;;)switch(t.n){case 0:return e.preventDefault(),t.n=1,G(this);case 1:return t.a(2)}},t,this)}));return function(e){return t.apply(this,arguments)}}()),a()}function a(){var n=parseFloat(document.querySelector("#calc-area").value)||0,r=t.querySelector('input[name="type"]:checked'),a=t.querySelector('input[name="floors"]:checked'),i=t.querySelector('input[name="finish"]:checked'),o=function(t,e,n,r){var a,i;if(t<20||t>500)return null;var o=t*((null===(a=W[e])||void 0===a||null===(a=a[n])||void 0===a?void 0:a[r])||(null===(i=W[e])||void 0===i||null===(i=i[1])||void 0===i?void 0:i[r])||25e3);return Math.round(.9*o)}(n,r?r.value:null,a?a.value:null,i?i.value:null);e.textContent=null===o?"—":new Intl.NumberFormat("ru-RU").format(o)}}(),function(){var t=document.getElementById("yandex-map");if(t){var e=function(){if("undefined"!=typeof ymaps&&"function"==typeof ymaps.ready)try{return ymaps.ready(function(){(function(){return lt.apply(this,arguments)})().catch(function(e){console.error("❌ Ошибка инициализации карты:",e),t.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">Ошибка загрузки карты</p>'})}),!0}catch(e){return console.error("❌ Ошибка при вызове ymaps.ready:",e),t.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">Ошибка инициализации карты</p>',!0}return!1};if(!e())var n=0,r=setInterval(function(){n++,e()?clearInterval(r):n>=100&&(clearInterval(r),console.error("❌ Библиотека Яндекс Карт не загружена в течение 10 секунд"),t.innerHTML='<p style="text-align: center; padding: 2rem; color: var(--color-gray);">Карта временно недоступна. Проверьте подключение к интернету.</p>')},100)}else console.warn("Контейнер карты не найден")}(),function(){if(window.innerWidth<=767)return null;try{return new St}catch(t){return console.error("Ошибка при инициализации персонажа:",t),null}}();var s=document.getElementById("footer-year");s&&(s.textContent=(new Date).getFullYear())})})();